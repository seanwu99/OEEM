/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/model/resource/ResourceModel","sap/ui/core/IconPool","sap/ui/core/UIComponent","sap/ui/core/mvc/JSView","sap/ui/model/json/JSONModel","./model/FavoriteModel","./util/Sorter"],function(q,R,I,U,J,a,F,S){"use strict";return U.extend("sap.ui.demokit.icex.Component",{metadata:{includes:["css/style.css"]},init:function(){U.prototype.init.apply(this,arguments);this.sPath=q.sap.getModulePath("sap.ui.demokit.icex");var f=new F();this.setModel(f,"fav");q.ajax(this.sPath+"/model/groups.json",{dataType:"json",success:q.proxy(this.onGroupsLoaded,this)});var i=new R({bundleName:"sap.ui.demokit.icex.i18n.i18n"});this.setModel(i,"i18n");},createContent:function(){return sap.ui.jsview("app","sap.ui.demokit.icex.view.App");},onGroupsLoaded:function(d){if(d){var t=new Date().getTime();d.groups.sort(S.sortByName);for(var i=0;i<d.groups.length;i++){if(d.groups[i].icons){d.groups[i].count=d.groups[i].icons.length;}if(d.groups[i].icons){d.groups[i].icons.sort(S.sortByName);}}var b=I.getIconNames(),c=[],e=q.sap.syncGetJSON(this.sPath+"/model/tags.json").data;for(var i=0;i<b.length;i++){var C=b[i],o=e[C],f={name:C,tags:C};if(o){f.tags+=","+o.Tags.join();}c[i]=f;}c.sort(S.sortByName);d.groups.splice(0,0,{name:"all",text:"All",icons:c,count:c.length});var g=new a(d);g.setSizeLimit(1000000);this.setModel(g);q.sap.log.info("Component.js: Sorted all those groups and icons in "+(new Date().getTime()-t)+" ms");}}});});
