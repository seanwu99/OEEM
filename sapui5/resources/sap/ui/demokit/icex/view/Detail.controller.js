/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2017 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/IconPool","sap/ui/model/json/JSONModel","sap/m/InstanceManager","sap/m/MessageToast","sap/ui/Device"],function(C,I,J,a,M,D){"use strict";return C.extend("sap.ui.demokit.icex.view.Detail",{onInit:function(){this.getView().setModel(new J({}));var b=this.getOwnerComponent().getEventBus();b.subscribe("app","RefreshDetail",function(c,e,d){if(d&&d.name){this._update(d.name);}},this);},_update:function(i){var f=this.getView().getModel("fav"),b=(f)?f.isFavorite(i):false,m=this.getView().getModel(),c=I.getIconInfo(i),s=(!c)?"?":c.content.charCodeAt(0).toString(16);m.setData({name:i,id:s,showFavorite:!b,showUnfavorite:b,isPhone:D.system.phone,isNoPhone:!D.system.phone});var l=this.getView().byId("idLabel"),B=this.getView().getModel("i18n").getResourceBundle(),t=B.getText("iconIDLabel",[s]);l.setText(t);},navBack:function(e){var b=this.getOwnerComponent().getEventBus();b.publish("nav","back");},favorite:function(e){var d=this.getView().getModel().getData();if(d&&d.name){var f=this.getView().getModel("fav");var n=f.toggleFavorite(d.name);if(a.hasOpenPopover()){a.closeAllPopovers();}if(n){M.show('The icon has been added to your favorites');}else{M.show('The icon has been removed from your favorites');}this._update(d.name);}}});});
